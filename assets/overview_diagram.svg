<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="570px" preserveAspectRatio="none" style="width:597px;height:570px;background:#FFFFFF;" version="1.1" viewBox="0 0 597 570" width="597px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="377.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="28" y="139.6953"/><rect fill="#FFFFFF" height="100.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="33" y="241.9609"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="288" y="110.5625"/><rect fill="#FFFFFF" height="275.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="421.5" y="241.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="426.5" y="429.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="426.5" y="488.0234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="36.2969" y2="535.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="292.5" x2="292.5" y1="36.2969" y2="535.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="426.5" x2="426.5" y1="36.2969" y2="535.1563"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="12" y="24.9951">PicoW</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="5" y="534.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="12" y="554.1514">PicoW</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="241.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="248.5" y="24.9951">Google ID Kit</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="241.5" y="534.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="248.5" y="554.1514">Google ID Kit</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="354.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="361.5" y="24.9951">Realtime Database</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="354.5" y="534.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="361.5" y="554.1514">Realtime Database</text><rect fill="#FFFFFF" height="377.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="28" y="139.6953"/><rect fill="#FFFFFF" height="100.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="33" y="241.9609"/><rect fill="#FFFFFF" height="59.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="288" y="110.5625"/><rect fill="#FFFFFF" height="275.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="421.5" y="241.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="426.5" y="429.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="426.5" y="488.0234"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="590.5" x="0" y="66.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="590.5" y1="66.8633" y2="66.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="590.5" y1="69.8633" y2="69.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="126" x="232.25" y="56.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="238.25" y="72.3638">Authentication</text><polygon fill="#181818" points="276,106.5625,286,110.5625,276,114.5625,280,110.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="33" x2="282" y1="110.5625" y2="110.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="40" y="105.4966">Authentication Request</text><polygon fill="#181818" points="49,135.6953,39,139.6953,49,143.6953,45,139.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43" x2="287" y1="139.6953" y2="139.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="55" y="134.6294">Authentication Response (ID_Token)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="590.5" x="0" y="198.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="590.5" y1="198.2617" y2="198.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="590.5" y1="201.2617" y2="201.2617"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="106" x="242.25" y="187.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87" x="248.25" y="203.7622">Web socket</text><polygon fill="#181818" points="409.5,237.9609,419.5,241.9609,409.5,245.9609,413.5,241.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43" x2="415.5" y1="241.9609" y2="241.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="50" y="236.895">Websocker start (ID_Token)</text><line style="stroke:#181818;stroke-width:1.0;" x1="431.5" x2="473.5" y1="271.0938" y2="271.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="473.5" y1="271.0938" y2="284.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="432.5" x2="473.5" y1="284.0938" y2="284.0938"/><polygon fill="#181818" points="442.5,280.0938,432.5,284.0938,442.5,288.0938,438.5,284.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="438.5" y="266.0278">validate Token (JWT)</text><polygon fill="#181818" points="54,309.2266,44,313.2266,54,317.2266,50,313.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="420.5" y1="313.2266" y2="313.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="60" y="308.1606">ok if valid token</text><polygon fill="#181818" points="49,338.3594,39,342.3594,49,346.3594,45,342.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43" x2="420.5" y1="342.3594" y2="342.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="55" y="337.2935">error</text><line style="stroke:#A80036;stroke-width:2.0;" x1="24" x2="42" y1="333.3594" y2="351.3594"/><line style="stroke:#A80036;stroke-width:2.0;" x1="24" x2="42" y1="351.3594" y2="333.3594"/><polygon fill="#181818" points="409.5,367.4922,419.5,371.4922,409.5,375.4922,413.5,371.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="415.5" y1="371.4922" y2="371.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="45" y="366.4263">Subsribe to data path</text><polygon fill="#181818" points="49,396.625,39,400.625,49,404.625,45,400.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43" x2="420.5" y1="400.625" y2="400.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="55" y="395.5591">full data</text><polygon fill="#181818" points="447.5,425.7578,437.5,429.7578,447.5,433.7578,443.5,429.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="441.5" x2="589.5" y1="429.7578" y2="429.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="453.5" y="424.6919">&lt;&lt; data update &gt;&gt;</text><polygon fill="#181818" points="49,454.8906,39,458.8906,49,462.8906,45,458.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43" x2="420.5" y1="458.8906" y2="458.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="55" y="453.8247">partitial data update</text><polygon fill="#181818" points="447.5,484.0234,437.5,488.0234,447.5,492.0234,443.5,488.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="441.5" x2="589.5" y1="488.0234" y2="488.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="453.5" y="482.9575">&lt;&lt; data update &gt;&gt;</text><polygon fill="#181818" points="44,513.1563,34,517.1563,44,521.1563,40,517.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="38" x2="425.5" y1="517.1563" y2="517.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="50" y="512.0903">partitial data update</text><!--MD5=[c3728903d0c44fb90d9b8e75ba956c29]
@startuml
participant PicoW as pi
participant "Google ID Kit" as GIK
participant "Realtime Database" as rtdb
== Authentication ==
pi -> GIK : Authentication Request
activate GIK
GIK -> pi: Authentication Response (ID_Token)
activate pi
deactivate GIK
== Web socket ==
pi ->  rtdb: Websocker start (ID_Token) 
activate rtdb
activate pi
rtdb -> rtdb: validate Token (JWT)
rtdb -> pi: ok if valid token
rtdb - -> pi !! : error 

{start} pi ->  rtdb: Subsribe to data path 
rtdb -> pi: full data
rtdb <- -] : << data update >>
activate rtdb
rtdb - -> pi: partitial data update
deactivate rtdb
rtdb <- -] : << data update >>
activate rtdb
rtdb - -> pi: partitial data update
deactivate rtdb
deactivate pi
deactivate rtdb
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>